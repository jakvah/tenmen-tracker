<!DOCTYPE html>
<html>
<title>Matches / Tenman Tracker</title>
{% extends "tenman/navbar.html" %}
{% block body %}
<body>

  

  <div class="container" style="padding-top:5px; padding-bottom:5px;">
    <h4> Most Played Maps (under construction) </h4>
  </div>
  <div class="container">
    <!-- Row 1-->
    <div class ="row">
      <!-- LH Column-->
      <div class="col-md-6">
        <div class="card border-success text-dark bg-light">
          <div class="card-body">
            <h5 class="card-title">#1  {{top_maps[0][0]}}</h5>
            <img src="{{maps_img[top_maps[0][0]]}}" class="card-img-bottom" alt="...">
          </div>
          <div class="card-footer">
            Played {{ top_maps[0][1] }} times // Total of {{map_rounds[top_maps[0][0]]}} rounds
          </div>
        </div>
       </div>

       <!-- RH Column-->       
      <div class="col-md-6">
        <div class="card border-danger mb-3" style="margin-top:10px;">
          <div class="card-body">
              <!--<h5 class="card-title">Latest matches</h5>-->
            {% for i in range(top_maps.__len__()-1) %}
            <div class="row">
              <div class="col-sm-5">
                <h6 class="mb-0"><img src="{{maps_img[top_maps[i+1][0]]}}" height = "20" width="40" style="margin-right: 5px;">#{{ i+2 }} {{ top_maps[i+1][0] }}</h6>
              </div>
              <div class="col-sm-7 text-secondary">
                {{ top_maps[i+1][1] }} matches // {{map_rounds[top_maps[i+1][0]]}} rounds
              </div>
            </div>
            {% if i != top_maps.__len__()-2 %}
            <hr>
            {% endif %}
            {% endfor %}
            
          </div>
      </div>
      <!-- RH Column ends-->
        
    </div>
  </div>

    <div class="container" style="padding-top:5px; padding-bottom:5px;">
      <h4> Search among {{num_matches}} recorded matches </h4>
    </div>

<div class="container">
	  <div class="row justify-content-center">
                        <div class="col-12"> 
                            <form class="card card-sm"> 
                                <div class="card-body row no-gutters align-items-center ">                                    
                                  <div class="col-auto">
                                        <i class="fas fa-search h4 text-body"></i>
                                    </div>
                                    
                                    <div class="col">
                                        <input class="form-control form-control-lg form-control-borderless" type="search" placeholder="Search for match ID, map or date (i.e Nov 14 2020)" id="livebox">
                                      </div>
                                     
                                </div>
                            </form>
                            <table class="table" id=datalist>
                              

                            </table>
                        </div>
                        
    </div>
</div>
</body>

<!-- Livesearch script -->
<script>
  $(document).ready(function(){
    $("#livebox").on("input",function(e){
      text_in_livebox = $("#livebox").val()
      $.ajax({
        method:"post",
        url:"/livesearch_matches",
        data:{text:text_in_livebox},
        success:function(res){
            //console.log(res);
            var data;
            data +='<thead class="thead-dark"><tr><th scope="col">Match ID</th><th scope="col">Map</th></th><th scope="col">Score</th><th scope="col">Date</th></tr></thead><tbody>';
                    $.each(res,function(index,value){
                       // data += "<tr>"+'<td><a href="/tenman/match/'+value[0].toString()+'"</a>'+"</td></tr>";
                      data +='<tr><td><a href="/tenman/match/'+value[0].toString()+'"</a>'+value[0].toString() + '</td>';
                      data += '<td>' + '<img src="'+value[2].toString() + '" height="20" style="margin-right: 3px;;">' + value[1].toString()+"</td>";
                      data += '<td>' + value[4].toString() + ' - ' + value[5].toString() + '</td>';
                      data += '<td>' + value[3].toString().slice(0,17) + '</td></tr>';
                    });
            data += '</tbody>'
                    //ata += "</ul>";
                    $("#datalist").html(data);
        }
      })
    })
  })

</script>

<style>
  .form-control-borderless {
    border: none;
}

.form-control-borderless:hover, .form-control-borderless:active, .form-control-borderless:focus {
    border: none;
    outline: none;
    box-shadow: none;
}
</style>
<style>
  .active-cyan-2 input.form-control[type=text]:focus:not([readonly]) {
    border-bottom: 1px solid #4dd0e1;
    box-shadow: 0 1px 0 0 #4dd0e1;
  }
    </style>
  
{% endblock %}
  </html>